<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Group Project INST377</title>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs="
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css"
    />
    <script
      defer
      src="https://use.fontawesome.com/releases/v5.14.0/js/all.js"
    ></script>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="script.js"></script>
  </head>
  <body>
    <div class="global-features">
      <!-- Golobal Header -->
      <section class="hero is-primary">
        <div class="hero-body">
          <div class="container">
            <h1 class="title">Course Connector</h1>
          </div>
        </div>
      </section>

      <!-- Golobal Navigation bar -->
      <div class="navbar">
        <nav class="navbar is-light">
          <a class="navbar-item" href="home.html">
            <button><i class="fas fa-home fa-4x"></i></button>
          </a>
          <a class="navbar-item" href="search.html">
            <button><i class="fas fa-search fa-4x"></i></button>
          </a>
          <a class="navbar-item" href="bookmarks.html">
            <button><i class="far fa-bookmark fa-4x"></i></button>
          </a>
          <a class="navbar-item" href="preferences.html">
            <button><i class="fas fa-sliders-h fa-4x"></i></button>
          </a>
        </nav>
      </div>
    </div>

    <!-- Course Stat Tiles -->
    <div class="course-stats">
      <div class="tile is-ancestor">
        <div class="tile is-parent">
          <article class="tile is-child box" id="course-stat">
            <p class="title">3</p>
            <p class="subtitle">Credits</p>
          </article>
        </div>
        <div class="tile is-parent">
          <article class="tile is-child box" id="course-stat">
            <p class="title">Regular</p>
            <p class="subtitle">Grading Method</p>
          </article>
        </div>
      </div>
        <i class="far fa-bookmark"></i>
    </div>

    <!-- Course Description -->
    <div class='course-description-home'>
      <div class="tile is-parent">
        <div class="tile is-child box" id="home-description">
          <p class="title">Description</p>
          <p class="subtitle">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
            labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
            aliquip ex ea commodo consequat.</p>
        </div>
      </div>
    </div>

    <!-- Average Grade -->
    <div class="tile is-parent">
      <div class="tile is-child box" id="average-grade">
        <p class="title">Average Grade:</p>
        <p id="avgGrade"></p>
      </div>
    </div>

    <!-- Sections -->
    <div class="dropdown">
      <div class="title is-parent">
        <div class="title is-child box" id="sec">
          <p class="title">Sections</p>
          <p id="sections"></p>
        </div>
      </div>
    </div>
    

    <!-- Button to the syllabus repository -->
    <a href="course.html" class="learn">
      <button class="syllabus-repository"> Syllabus Repository </button>
    </a>

    <!-- Button to save -->

    <button href="#" class="float">
      <i class="far fa-heart fa-2x my-float"></i>
    </button>


    <!-- Button to see next -->

    <button href="#" class="float-x">
      <i class="fas fa-times fa-2x my-float"></i>
    </button>

    </section>

   
     <!-- JS for Buttons -->
  <script>
    const umd_courses= "https://api.umd.io/v1/courses?semester=202008";
    
    fetch(umd_courses) 
            .then((response) => response.json())
            .then((data) => {
                var select = document.getElementById("code");
                console.log(data)
                for (var i in data) {
                  select.innerHTML = data[i].course_id;
                }
                var select = document.getElementById("section");
                console.log(data)
                for (var i in data) {
                  select.innerHTML = data[i].name;
                }

                var select = document.getElementById("credit");
                console.log(data)
                for (var i in data) {
                  select.innerHTML = data[i].credits;
                }
    
        //Fetching PlanetTerp API
      const proxyurl = "https://cors-anywhere.herokuapp.com/";
      const urlTerp = "https://api.planetterp.com/v1/grades?course=INST612"; // site that doesnâ€™t send Access-Control-*
      let TotalClassGPA = 0.0;

      fetch(proxyurl + urlTerp) // https://cors-anywhere.herokuapp.com/https://example.com
        .then(console.log())
        .then((response) => response.json())
        .then((data) => {
          data.forEach((item) => {
            let total =
              item["A+"] * 4.0 +
              item["A"] * 4.0 +
              item["A-"] * 3.7 +
              item["B+"] * 3.3 +
              item["B"] * 3.0 +
              item["B-"] * 2.7 +
              item["C+"] * 2.3 +
              item["C"] * 2.0 +
              item["C-"] * 1.7 +
              item["D+"] * 1.3 +
              item["D"] * 1.0 +
              item["D-"] * 0.7;

            let numStudents =
              item["A+"] +
              item["A"] +
              item["A-"] +
              item["B+"] +
              item["B"] +
              item["B-"] +
              item["C+"] +
              item["C"] +
              item["C-"] +
              item["D+"] +
              item["D"] +
              item["D-"] +
              item["F"];

            TotalClassGPA += total / numStudents;
          });

          TotalClassGPA /= data.length;
          console.log(TotalClassGPA.toFixed(2));
          document.getElementById("avgGrade").innerHTML = "<b>" + "Average Grade: " + "</b>" + TotalClassGPA.toFixed(2);
        });

   
  </script>

  </body>
</html>
